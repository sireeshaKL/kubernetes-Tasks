apiVersion: apps/v1
kind: Deployment
metadata:
 name: mysql1
spec:
 selector:
   matchLabels:
     app: mysql1
 template:
   metadata:
     labels:
      app: mysql1

   spec:
     containers:
       - name: compose-container1
         image: sireeshakl/dockerrepo-db
         ports:
           - name: port3306
             containerPort: 3306
         env:
           - name: MYSQL_ROOT_PASSWORD
             value: root
         volumeMounts:
           - mountPath: /var/lib/mysql
             name: volumecompose
     restartPolicy: Always
     volumes:
       - name: volumecompose
         hostPath:
          path: /root/mnt/mntvolume
---
apiVersion: v1
kind: Service
metadata:
  name: mysql1
spec:
  type: NodePort
  selector:
    app: mysql1
  ports:
    - name: port5001
      nodePort: 30305
      protocol: TCP
      port: 3306
      targetPort: 3306

